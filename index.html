<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Stanforis Rwanda</title>

    <!-- Cordova + Firebase security & meta -->
  <meta http-equiv="Content-Security-Policy"
        content="
          default-src 'self' data: gap: https://ssl.gstatic.com https://www.gstatic.com https://www.googleapis.com https://firebase.googleapis.com https://*.firebaseio.com 'unsafe-eval';
          script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.gstatic.com https://www.googleapis.com https://www.gstatic.com/firebasejs/ https://apis.google.com;
          style-src 'self' 'unsafe-inline';
          img-src 'self' data: content: https://www.gstatic.com;
          connect-src 'self' https://*.firebaseio.com https://www.googleapis.com wss://*.firebaseio.com;
          frame-src 'self' https://stanforis-iot.firebaseapp.com https://accounts.google.com;
          font-src 'self' data:;
          media-src *;
        ">


  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
  <meta name="color-scheme" content="light dark">

  <!-- App favicon & styles -->
  <link rel="icon" type="image/png" sizes="192x192" href="./android-icon-192x192.png">
  <link href="./css/output.css" rel="stylesheet">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0d6efd">

  <style>
    :root { --neon: #0ff; color-scheme: dark light; }
    body { margin:0; padding:0; display:flex; justify-content:center; background:#000; color:#0ff; }
    #app { max-width: 420px; width: 100%; min-height: 100vh; position:relative; display:flex; flex-direction:column; background:#001122; overflow:hidden; }

    /* Neural circuit lines in corners */
    #circuit-bg {
      position:absolute; inset:0; pointer-events:none; z-index:0;
    }
    canvas#circuitCanvas { width:100%; height:100%; display:block; }

    /* Heartbeat screen */
    #heartbeat-screen {
      flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center; padding:2rem; text-align:center; position:relative; z-index:1;
    }
    .heartbeat {
      width: 200px; height: 200px;
      border-radius:50%; border:5px solid var(--neon);
      display:flex; align-items:center; justify-content:center;
      font-size:24px; font-weight:bold;
      animation:pulse 1s infinite;
      cursor:pointer; text-shadow:0 0 15px var(--neon);
    }
    @keyframes pulse {
      0%{box-shadow:0 0 15px var(--neon);}
      50%{box-shadow:0 0 40px var(--neon);}
      100%{box-shadow:0 0 15px var(--neon);}
    }
    .startup-msg { margin-top:20px; font-size:14px; color: var(--neon); }
  </style>
</head>
<body>
    <div id="app">
    <!-- Neural circuit background -->
    <div id="circuit-bg">
      <canvas id="circuitCanvas"></canvas>
    </div>

    <!-- Mobile-first splash -->
    <main id="heartbeat-screen">
      <div class="heartbeat" id="splash-tap">STANFORIS</div>
      <div class="startup-msg"></div>
    </main>
  </div>

  <!-- Cordova core -->
  <script src="cordova.js"></script>

  <!-- App modules -->
  <script type="module" src="./js/firebase.js"></script>
  <script type="module" src="./js/app.js"></script>
  <script type="module" src="./js/index.js"></script>
  <script type="module" src="./js/bootstrap.js"></script>

  <!-- Inline: splash tap & canvas background -->

  <script>
    // Handle splash tap
    document.getElementById('splash-tap').addEventListener('click', () => {
      App.navigateTo('login'); 
    });

    // Neural circuit canvas effect
    const canvas = document.getElementById('circuitCanvas');
    const ctx = canvas.getContext('2d');

    function resizeCanvas(){
      canvas.width = canvas.offsetWidth;
      canvas.height = canvas.offsetHeight;
      drawCircuit();
    }

    function drawCircuit(){
      const w = canvas.width, h = canvas.height;
      ctx.clearRect(0,0,w,h);
      ctx.strokeStyle = '#0ff33';
      ctx.lineWidth = 1;
      const lines = 30;

      // top-left circuits
      for(let i=0;i<lines;i++){
        let x0 = Math.random()*w*0.25, y0=Math.random()*h*0.25;
        let x1 = x0 + Math.random()*w*0.25, y1=y0 + Math.random()*h*0.25;
        ctx.beginPath(); ctx.moveTo(x0,y0); ctx.lineTo(x1,y0); ctx.lineTo(x1,y1); ctx.stroke();
      }

      // bottom-right circuits
      for(let i=0;i<lines;i++){
        let x0 = w - Math.random()*w*0.25, y0=h - Math.random()*h*0.25;
        let x1 = x0 - Math.random()*w*0.25, y1=y0 - Math.random()*h*0.25;
        ctx.beginPath(); ctx.moveTo(x0,y0); ctx.lineTo(x1,y0); ctx.lineTo(x1,y1); ctx.stroke();
      }
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
  </script>

</body>
</html>
