<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>IoT SaaS â€” Contacts</title>
<link href="../css/output.css" rel="stylesheet">
  <style>
    :root{color-scheme:dark light}
    ::-webkit-scrollbar{width:8px;height:8px}
    ::-webkit-scrollbar-thumb{background:#2f2f2f;border-radius:8px}
    .side-rail{position:absolute;top:64px;bottom:84px;display:flex;flex-direction:column;gap:12px;justify-content:center}
    .rail-btn{width:18px;height:18px;border-radius:4px;background:#3a3a3a;display:flex;align-items:center;justify-content:center}
    .safe-bottom{padding-bottom: env(safe-area-inset-bottom)}
  </style>
</head>
<body class="bg-neutral-950 text-neutral-100 selection:bg-indigo-500/40">
  <div id="app" class="mx-auto max-w-md min-h-screen relative">


        <!-- Header -->
    <header class="sticky top-0 z-30 bg-neutral-900/80 backdrop-blur border-b border-neutral-800">
      <div class="flex items-center gap-3 px-4 h-16">
        <img id="profileAvatar"src="https://ui-avatars.com/api/?name=User&background=111111&color=ffffff"alt="avatar"class="w-9 h-9 rounded-full ring-2 ring-neutral-700 cursor-pointer"title="Click to update profile picture" /> <input type="file" id="avatarUploadInput" accept="image/*" class="hidden" />
        <div class="flex-1 min-w-0">
          <p class="text-xs text-neutral-400 leading-tight">Admin</p>
          <p id="username" class="font-medium truncate">please wait....</p>
        </div>
    </header>
    <section>
      <div class="flex flex-col px-4 py-4">
        <h1 class="text-lg font-semibold truncate">Emergency Communication</h1>
        <p class="text-xs text-neutral-400">Regist an Contact you thinkit may be important for you</p>
      </div>
    </section>


    <!-- Side Rails -->
    <div class="side-rail left-0 pl-2 hidden sm:flex">
      <button class="rail-btn" onclick="openPage('left1.html')"></button>
      <button class="rail-btn" onclick="openPage('left2.html')"></button>
      <button class="rail-btn" onclick="openPage('left3.html')"></button>
      <button class="rail-btn" onclick="openPage('left4.html')"></button>
      <button class="rail-btn" onclick="openPage('left5.html')"></button>
    </div>
    <div class="side-rail right-0 pr-2 hidden sm:flex">
      <button class="rail-btn" onclick="openPage('right1.html')"></button>
      <button class="rail-btn" onclick="openPage('right2.html')"></button>
      <button class="rail-btn" onclick="openPage('right3.html')"></button>
      <button class="rail-btn" onclick="openPage('right4.html')"></button>
      <button class="rail-btn" onclick="openPage('right5.html')"></button>
    </div>

    <!-- Content -->
    <main class="px-4 pt-4 pb-24 space-y-4">

      <!-- Emergency Contacts -->
      <section class="rounded-2xl border border-neutral-800 bg-neutral-900 p-4 space-y-3">
        <h2 class="font-medium text-lg">Emergency Contacts</h2>
        <div class="flex gap-2 mb-3">
          <input type="text" id="emergency-search" placeholder="Search by name or role..." class="w-full rounded-xl bg-neutral-800 border border-neutral-700 p-2 text-neutral-100" />
          <button id="refreshEmergencyBtn" class="px-3 rounded-xl bg-indigo-600 hover:bg-indigo-500">ðŸ”„ Refresh</button>
        </div>
        <ul id="emergencyList" class="space-y-2">
          <!-- Contacts injected by JS -->
        </ul>
      </section>

      <!-- System Users -->
      <section class="rounded-2xl border border-neutral-800 bg-neutral-900 p-4 space-y-3">
        <h2 class="font-medium text-lg">System Users</h2>
        <div class="flex gap-2 mb-3">
          <input type="text" id="user-search" placeholder="Search users..." class="w-full rounded-xl bg-neutral-800 border border-neutral-700 p-2 text-neutral-100" />
          <button id="refreshUserBtn" class="px-3 rounded-xl bg-indigo-600 hover:bg-indigo-500">ðŸ”„ Refresh</button>
        </div>
        <ul id="userList" class="space-y-2">
          <!-- Users injected by JS -->
        </ul>
      </section>

    </main>

    <!-- Bottom Panel -->
    <footer class="safe-bottom fixed bottom-0 inset-x-0 z-30">
      <div class="mx-auto max-w-md">
        <nav class="bg-neutral-900 border-t border-neutral-800">
          <div class="grid grid-cols-4 text-center text-xs">
            <button class="py-3 hover:bg-neutral-800" onclick="openPage('dashboard.html')">Back</button>
          </div>
        </nav>
        <div class="bg-neutral-950 text-[10px] text-neutral-500 text-center py-2">
          Â© <span id="year"></span> Stanforis Rwandaâ€” All rights reserved
        </div>
      </div>
    </footer>

  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    function openPage(page){ toast('Navigate to ' + page); }
    function toast(msg){ alert(msg); }

    // Example contact list
    const emergencyContacts = [
      { name: 'Police', role: 'Security', phone: '+250788000001' },
      { name: 'Fire Dept.', role: 'Emergency', phone: '+250788000002' }
    ];
    const systemUsers = [
      { name: 'Alice', role: 'Admin', email: 'alice@example.com' },
      { name: 'Bob', role: 'Operator', email: 'bob@example.com' }
    ];

    function renderList(listId, items, formatFn){
      const container = document.getElementById(listId);
      container.innerHTML = '';
      items.forEach(item=>{
        const li = document.createElement('li');
        li.className = 'p-3 rounded-xl bg-neutral-800 hover:bg-neutral-700 flex justify-between';
        li.innerHTML = formatFn(item);
        container.appendChild(li);
      });
    }

    renderList('emergencyList', emergencyContacts, c=>`${c.name} - ${c.role} <span>${c.phone}</span>`);
    renderList('userList', systemUsers, u=>`${u.name} - ${u.role} <span>${u.email}</span>`);

    // Search functionality
    document.getElementById('emergency-search').addEventListener('input', e=>{
      const q = e.target.value.toLowerCase();
      renderList('emergencyList', emergencyContacts.filter(c=>c.name.toLowerCase().includes(q) || c.role.toLowerCase().includes(q)), c=>`${c.name} - ${c.role} <span>${c.phone}</span>`);
    });
    document.getElementById('user-search').addEventListener('input', e=>{
      const q = e.target.value.toLowerCase();
      renderList('userList', systemUsers.filter(u=>u.name.toLowerCase().includes(q) || u.role.toLowerCase().includes(q)), u=>`${u.name} - ${u.role} <span>${u.email}</span>`);
    });

    document.getElementById('refreshEmergencyBtn').addEventListener('click', ()=>toast('Emergency contacts refreshed'));
    document.getElementById('refreshUserBtn').addEventListener('click', ()=>toast('System users refreshed'));
    function openPage(page) {window.location.href = page;}
  </script>
  <script type="module" src="../js/pages/contucts.js"></script>
</body>
</html>
